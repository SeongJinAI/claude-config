# 스토리보드 기반 API 개발 워크플로 (템플릿)

> 이 템플릿을 프로젝트 CLAUDE.md에 복사하여 사용하세요.
> `[placeholder]` 부분을 프로젝트에 맞게 수정합니다.

---

## 스토리보드 기반 API 개발 워크플로

신규 API 개발 시 기획문서(스토리보드 PDF)를 분석하여 체계적으로 개발하는 표준 워크플로입니다.

### 스토리보드 파일 위치 및 형식

| 항목 | 값 |
|------|-----|
| 위치 | `[기획문서 디렉토리 경로]` |
| 파일명 규칙 | `[파일명 패턴]` |
| 형식 | PDF (이미지 기반) — **텍스트 검색 불가**, Read 도구로 시각적 분석 필요 |

### 스토리보드 분석 방법

**Step 1: PDF 전체 구조 파악**
- 5페이지씩 순차적으로 Read (pages: "1-5", "6-10", ...)
- 화면 구성, 메뉴 구조, 탭/섹션 파악

**Step 2: UI 요소 → API 매핑**

| UI 요소 | API 매핑 대상 |
|---------|--------------|
| 화면 제목/메뉴 경로 | `@Tag(name)`, `@RequestMapping` |
| 테이블 컬럼 | Response DTO 필드 |
| 필터/검색 영역 | Request 파라미터 (`@ModelAttribute`) |
| 필수 표시(*) | `@NotBlank(message = "ERR_...")` 검증 |
| 탭 구조 | 중첩 record DTO |
| 조회 버튼 | `@GetMapping` 엔드포인트 |
| 등록/수정/삭제 버튼 | `@PostMapping`/`@PutMapping`/`@DeleteMapping` |
| 드롭다운/셀렉트 | 코드 테이블 또는 Enum 조회 API |
| 페이지네이션 | 페이지네이션 유틸리티 |

**Step 3: 데이터 구조 추론**
- 코드/이름 쌍 → 별도 엔티티 조인 또는 코드 테이블 참조
- 1:N 관계 → 자식 엔티티 + List 필드
- 날짜 형식 → String `yyyyMMdd` 또는 `yyyyMM` 또는 LocalDate/LocalDateTime
- 금액/수량 → `BigDecimal` 또는 `Long`

### 전체 개발 파이프라인

```
Phase 1: 기능명세서 작성
  └─ 위치: [기능명세서 경로]
  └─ 포함: API 명세, 검증 흐름도, 검증 체크리스트

Phase 2: 아키텍처 설명서 작성
  └─ 위치: [아키텍처 설명서 경로]
  └─ 포함: 전체 흐름, 시퀀스 다이어그램, Entity 관계, 권한 구분

Phase 3: 코드 구현 (순서 중요)
  └─ 1. Entity
  └─ 2. Repository (+ QueryDSL if needed)
  └─ 3. DTO (Request/Response)
  └─ 4. Service
  └─ 5. Controller
  └─ 6. Test

Phase 4: 사용자매뉴얼 작성
  └─ 위치: [사용자매뉴얼 경로]

Phase 5: 부수 문서 업데이트
  └─ ERROR_MESSAGES: 신규 에러 코드 추가
  └─ 아키텍처 특이사항: 설계 결정사항 기록
```

### 주의사항

1. **PDF는 이미지 기반** — 텍스트 검색(`Grep`)이 불가하므로 반드시 `Read` 도구로 시각적 분석
2. **스토리보드 ≠ 최종 사양** — UI 기획일 뿐이므로, DB 스키마와 비즈니스 로직은 **기존 코드 분석 병행** 필수
3. **유사 기능 참고 우선** — 새로운 패턴을 만들기 전에 동일 도메인의 기존 구현 코드를 먼저 분석
4. **기존 Entity/테이블 확인** — 스토리보드에서 새 엔티티가 필요해 보여도, 이미 존재하는 테이블인지 먼저 확인
5. **개발 순서 준수** — 문서(Phase 1-2) → 코드(Phase 3) → 매뉴얼(Phase 4-5) 순서를 지켜야 설계 누락 방지
